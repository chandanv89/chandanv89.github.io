<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Scully 0.0.0">
  <meta charset="utf-8">
  <title>Chandan Veerabhadrappa</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1GQ4JDPVQT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-1GQ4JDPVQT');
</script>
<style>@import"https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=JetBrains+Mono:ital,wght@0,500;1,500&family=Lato:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Lora:ital,wght@0,500;0,700;1,500;1,700&family=Montserrat:ital,wght@0,100;0,500;0,700;0,900;1,100;1,500;1,700;1,900&display=swap";:root{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13,110,253;--bs-secondary-rgb:108,117,125;--bs-success-rgb:25,135,84;--bs-info-rgb:13,202,240;--bs-warning-rgb:255,193,7;--bs-danger-rgb:220,53,69;--bs-light-rgb:248,249,250;--bs-dark-rgb:33,37,41;--bs-white-rgb:255,255,255;--bs-black-rgb:0,0,0;--bs-body-color-rgb:33,37,41;--bs-body-bg-rgb:255,255,255;--bs-font-sans-serif:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue","Noto Sans","Liberation Sans",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--bs-font-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, .15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-bg:#fff;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0, 0, 0, .175);--bs-border-radius:.375rem;--bs-border-radius-sm:.25rem;--bs-border-radius-lg:.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-2xl:2rem;--bs-border-radius-pill:50rem;--bs-link-color:#0d6efd;--bs-link-hover-color:#0a58ca;--bs-code-color:#d63384;--bs-highlight-bg:#fff3cd}*,:after,:before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}:root{--fa-style-family-brands:"Font Awesome 6 Brands";--fa-font-brands:normal 400 1em/1 "Font Awesome 6 Brands"}@font-face{font-family:"Font Awesome 6 Brands";font-style:normal;font-weight:400;font-display:block;src:url(fa-brands-400.9210030c21e68a90.woff2) format("woff2"),url(fa-brands-400.5f7c5bb77eae788b.ttf) format("truetype")}:root{--fa-font-regular:normal 400 1em/1 "Font Awesome 6 Free"}@font-face{font-family:"Font Awesome 6 Free";font-style:normal;font-weight:400;font-display:block;src:url(fa-regular-400.02ad4ff91ef84f65.woff2) format("woff2"),url(fa-regular-400.570a165b064c1468.ttf) format("truetype")}:root{--fa-style-family-classic:"Font Awesome 6 Free";--fa-font-solid:normal 900 1em/1 "Font Awesome 6 Free"}@font-face{font-family:"Font Awesome 6 Free";font-style:normal;font-weight:900;font-display:block;src:url(fa-solid-900.3eae9857c06e9372.woff2) format("woff2"),url(fa-solid-900.0b5caff7ad4bc179.ttf) format("truetype")}@charset "UTF-8";:root{--bs-blue:#0d6efd;--bs-indigo:#6610f2;--bs-purple:#6f42c1;--bs-pink:#d63384;--bs-red:#dc3545;--bs-orange:#fd7e14;--bs-yellow:#ffc107;--bs-green:#198754;--bs-teal:#20c997;--bs-cyan:#0dcaf0;--bs-black:#000;--bs-white:#fff;--bs-gray:#6c757d;--bs-gray-dark:#343a40;--bs-gray-100:#f8f9fa;--bs-gray-200:#e9ecef;--bs-gray-300:#dee2e6;--bs-gray-400:#ced4da;--bs-gray-500:#adb5bd;--bs-gray-600:#6c757d;--bs-gray-700:#495057;--bs-gray-800:#343a40;--bs-gray-900:#212529;--bs-primary:#0d6efd;--bs-secondary:#6c757d;--bs-success:#198754;--bs-info:#0dcaf0;--bs-warning:#ffc107;--bs-danger:#dc3545;--bs-light:#f8f9fa;--bs-dark:#212529;--bs-primary-rgb:13, 110, 253;--bs-secondary-rgb:108, 117, 125;--bs-success-rgb:25, 135, 84;--bs-info-rgb:13, 202, 240;--bs-warning-rgb:255, 193, 7;--bs-danger-rgb:220, 53, 69;--bs-light-rgb:248, 249, 250;--bs-dark-rgb:33, 37, 41;--bs-white-rgb:255, 255, 255;--bs-black-rgb:0, 0, 0;--bs-body-color-rgb:33, 37, 41;--bs-body-bg-rgb:255, 255, 255;--bs-font-sans-serif:system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";--bs-font-monospace:SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;--bs-gradient:linear-gradient(180deg, rgba(255, 255, 255, .15), rgba(255, 255, 255, 0));--bs-body-font-family:var(--bs-font-sans-serif);--bs-body-font-size:1rem;--bs-body-font-weight:400;--bs-body-line-height:1.5;--bs-body-color:#212529;--bs-body-bg:#fff;--bs-border-width:1px;--bs-border-style:solid;--bs-border-color:#dee2e6;--bs-border-color-translucent:rgba(0, 0, 0, .175);--bs-border-radius:.375rem;--bs-border-radius-sm:.25rem;--bs-border-radius-lg:.5rem;--bs-border-radius-xl:1rem;--bs-border-radius-2xl:2rem;--bs-border-radius-pill:50rem;--bs-link-color:#0d6efd;--bs-link-hover-color:#0a58ca;--bs-code-color:#d63384;--bs-highlight-bg:#fff3cd}*,*:before,*:after{box-sizing:border-box}@media (prefers-reduced-motion: no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:var(--bs-body-font-family);font-size:var(--bs-body-font-size);font-weight:var(--bs-body-font-weight);line-height:var(--bs-body-line-height);color:var(--bs-body-color);text-align:var(--bs-body-text-align);background-color:var(--bs-body-bg);-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:rgba(0,0,0,0)}html,body{width:100%;height:100%}body{font-family:Montserrat,Lato,system-ui,sans-serif;background:white;background-image:radial-gradient(lightgray 5.5%,transparent 0);background-size:30px 30px;-webkit-user-select:none;user-select:none}</style><link rel="stylesheet" href="styles.0c09512193369258.css" media="all" onload="this.media='all'"><noscript><link rel="stylesheet" href="styles.0c09512193369258.css"></noscript><style>h1[_ngcontent-ehb-c26], h2[_ngcontent-ehb-c26], h3[_ngcontent-ehb-c26], h4[_ngcontent-ehb-c26], h5[_ngcontent-ehb-c26], h6[_ngcontent-ehb-c26]{font-family:DM Serif Display,Lora,serif}h1[_ngcontent-ehb-c26]{color:#330625;background-color:#f8d3ec;padding:5px;border-radius:5px;width:-moz-fit-content;width:fit-content}p[_ngcontent-ehb-c26]{font-family:Montserrat,Lato,system-ui,sans-serif;font-size:larger}p[_ngcontent-ehb-c26]   code[_ngcontent-ehb-c26]{border:1px solid pink;border-radius:3px;padding:3px;background-color:#fff6f8}pre[_ngcontent-ehb-c26]{border:1px solid pink;background:rgb(255,245,252);padding:5px;border-radius:5px}a[_ngcontent-ehb-c26]{color:var(--bs-link-color);padding:3px;text-decoration:none;background-color:#c1daff;border-radius:3px 3px 0 0;border-bottom:3px dotted var(--bs-link-color)}a[_ngcontent-ehb-c26]:hover{color:#fff;background-color:var(--bs-link-color);border-bottom:3px solid var(--bs-link-color)}</style><style>
      :host {
        display: none;
      }
      scully-content {
        display: none;
      }
    </style><script>window['ScullyIO']='generated';</script></head>

<body scully-version="0.0.0">
  <app-root _nghost-ehb-c21="" ng-version="15.2.9"><div _ngcontent-ehb-c21="" class="d-flex flex-column h-100 w-100"><app-header _ngcontent-ehb-c21="" _nghost-ehb-c20=""><div _ngcontent-ehb-c20="" class="d-flex min-vh-10 w-100 justify-content-center p-3"><div _ngcontent-ehb-c20="" routerlink="/" class="d-flex justify-content-start" tabindex="0"><h2 _ngcontent-ehb-c20="" class="font-weight-bold">Chandan</h2><h2 _ngcontent-ehb-c20="" class="font-weight-light">Veerabhadrappa</h2></div><!----><div _ngcontent-ehb-c20="" class="d-none d-md-flex flex-grow-1 justify-content-end align-items-start"><button _ngcontent-ehb-c20="" type="button" class="ml-2 mr-2 btn btn-outline-dark border-0 font-weight-bold" tabindex="0"> About Me </button><button _ngcontent-ehb-c20="" type="button" class="ml-2 mr-2 btn btn-outline-dark border-0 font-weight-bold" tabindex="0"> Work Experience </button><button _ngcontent-ehb-c20="" type="button" class="ml-2 mr-2 btn btn-outline-dark border-0 font-weight-bold" tabindex="0"> My Projects </button><button _ngcontent-ehb-c20="" type="button" class="ml-2 mr-2 btn btn-outline-dark border-0 font-weight-bold" tabindex="0"> My Blog </button><!----></div><div _ngcontent-ehb-c20="" class="d-flex d-md-none justify-content-end flex-grow-1"><div _ngcontent-ehb-c20="" ngbdropdown="" display="dynamic" container="body" class="d-inline-block dropdown"><button _ngcontent-ehb-c20="" ngbdropdowntoggle="" class="dropdown-toggle btn btn-outline-dark border-0" aria-expanded="false"><i _ngcontent-ehb-c20="" class="fas fa-lg fa-bars"></i></button><div _ngcontent-ehb-c20="" ngbdropdownmenu="" class="dropdown-menu dropdown-menu-right"><button _ngcontent-ehb-c20="" ngbdropdownitem="" class="dropdown-item" tabindex="0"> About Me </button><button _ngcontent-ehb-c20="" ngbdropdownitem="" class="dropdown-item" tabindex="0"> Work Experience </button><button _ngcontent-ehb-c20="" ngbdropdownitem="" class="dropdown-item" tabindex="0"> My Projects </button><button _ngcontent-ehb-c20="" ngbdropdownitem="" class="dropdown-item" tabindex="0"> My Blog </button><!----></div></div></div></div></app-header><div _ngcontent-ehb-c21="" class="d-flex flex-column flex-grow-1 align-items-center justify-content-center"><router-outlet _ngcontent-ehb-c21=""></router-outlet><app-blog _nghost-ehb-c26=""><div _ngcontent-ehb-c26="" class="vw-70">
    <!--scullyContent-begin--><h1 id="dockerize-your-spring-boot-application" _ngcontent-ehb-c26="">Dockerize your Spring Boot Application</h1>
<p _ngcontent-ehb-c26="">In this article, I’d like to walk you through how you can create a Docker image for a demo Spring Boot application. And, subsequently, we'll see how to setup a Github trigger to auto build the Docker image using the Docker Hub infrastructure.</p>
<p _ngcontent-ehb-c26=""><img src="/assets/images/sb-dh.png" alt="alt" _ngcontent-ehb-c26=""></p>
<p _ngcontent-ehb-c26="">The demo application that we’re making use of in this example can be downloaded from <a href="https://github.com/chandanv89/Hateoas-Example" _ngcontent-ehb-c26="">here</a>. It’s a simple Spring Boot application that illustrates HATEOAS links generation. How the app works, maybe that’s for another discussion. All we’ll be concentrating here is dockerizing it!</p>
<h2 id="docker-image-and-docker-container" _ngcontent-ehb-c26="">Docker Image and Docker Container</h2>
<p _ngcontent-ehb-c26="">For the uninitiated, Docker image is a self-contained deployment artefact that contains your application plus all the dependencies that the application needs to run. When you run this image on a Docker engine, you get a container that is running your application. A vague analogy could be an archived file (image) and its expanded contents (container).</p>
<p _ngcontent-ehb-c26=""><img src="/assets/images/docker-file-stages.png" alt="alt" _ngcontent-ehb-c26=""></p>
<p _ngcontent-ehb-c26="">You define the steps to package your application along with its dependencies into a Docker image, using a <em _ngcontent-ehb-c26="">Dockerfile</em>. Once you have an image, you can run it on the Docker Engine to create multiple container instances.</p>
<h2 id="why-dockerize" _ngcontent-ehb-c26="">Why Dockerize?</h2>
<p _ngcontent-ehb-c26="">One of the key benefits of Dockerizing your application is <strong _ngcontent-ehb-c26="">quick and easy environment setup</strong>. All you need is a Docker image and an instance of Docker Engine to run the image on. Since all the artefacts required to run your application are available within the image, <strong _ngcontent-ehb-c26="">it also eliminates "<em _ngcontent-ehb-c26="">It works on my machine; but doesn't work on yours</em>" problems</strong>.</p>
<p _ngcontent-ehb-c26="">Also, it gives you a <strong _ngcontent-ehb-c26="">standard way of deployments</strong> and facilitates easier deployments across environments like development, staging and production. With proper use of tags, it even allows for <strong _ngcontent-ehb-c26="">better version control</strong> and <strong _ngcontent-ehb-c26="">easy rollbacks</strong>.</p>
<p _ngcontent-ehb-c26="">This is not an exhaustive list of advantages of dockerizing your application. There are many more. I'll leave for you to explore more on it.</p>
<h2 id="the-demo-application" _ngcontent-ehb-c26="">The Demo Application</h2>
<p _ngcontent-ehb-c26="">The demo app can be download from <a href="https://github.com/chandanv89/Hateoas-Example" _ngcontent-ehb-c26="">Github</a>. The app exposes a few RESTful endpoints at port 8080. The app is built using the Spring Framework v2.4.1 and all the required dependent JARs are pulled when you build it.</p>
<pre _ngcontent-ehb-c26=""><code _ngcontent-ehb-c26="">GET http://localhost:8080/rest/v1/customers
GET http://localhost:8080/rest/v1/customers/{customerId}
GET http://localhost:8080/rest/v1/customers/{customerId}/orders
GET http://localhost:8080/rest/v1/orders
GET http://localhost:8080/rest/v1/orders
GET http://localhost:8080/rest/v1/orders/{orderId}
</code></pre>
<h2 id="the-dockerfile-explained" _ngcontent-ehb-c26="">The Dockerfile Explained</h2>
<p _ngcontent-ehb-c26="">While there are different ways to package your application, the one I'm using here generates the application JAR using the project source and then, copies only the resultant JAR to the container and runs it. That way, we can reduce the size of the resultant image and container. The downside of it, however, is that you cannot use the local cached maven repository. Each time you build the image, maven will download the required JARs from the central repository.</p>
<p _ngcontent-ehb-c26="">The root of this repository contains a few folders and files. We're interested in one file - Dockerfile. Let's take a look at its contents:</p>
<p _ngcontent-ehb-c26=""><img src="/assets/images/dockerfile-screenshot.png" alt="alt" _ngcontent-ehb-c26=""></p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">FROM maven:3.6.3-openjdk-11-slim AS MAVEN_BUILD</strong> Use the slim version (on Alpine) of Maven v3.6.3 for OpenJDK-11. You can refer to the application JAR generated at this stage using the alias <em _ngcontent-ehb-c26="">MAVEN_BUILD</em>.</p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">COPY ./ /opt/source</strong> Copies the entire project structure from the current folder (relative to where the Dockerfile resides) to a path on the container.</p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">RUN mvn clean package -f /opt/source/pom.xml</strong> Runs a given command on the container. In this case, generate the application JAR using the specified pom. This results in a fat JAR at <code _ngcontent-ehb-c26="">target/hateoas-example-1.0.0.jar</code>. This is our executable application.</p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">FROM openjdk:11-jre-slim</strong> Again, to run the application, we need a JRE. So, let's pull a slim version of the OpenJDK-11 JRE.</p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">COPY src/main/resources/UnlimitedJCEPolicyJDK8/*.jar /usr/lib/jvm/java-11-openjdk/jre/lib/security/</strong> In order to run this app on Docker Engine, you need to copy the relevant JCE JARs to the specified path on the container. You can download the JCE polilcy files from <a href="https://www.oracle.com/java/technologies/javase-jce8-downloads.html" _ngcontent-ehb-c26="">Oracle</a>.</p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">COPY --from=MAVEN_BUILD /opt/source/target/*.jar /opt/app.jar</strong> Copies the generated jar from the previous stage to a custom path on the container. Let's call it <code _ngcontent-ehb-c26="">app.jar</code>.</p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">ENTRYPOINT ["/usr/local/openjdk-11/bin/java"]</strong> Specifies the entrypoint to your container - what needs to be run once the container is initialised. We need to run our application JAR file. So, let's start with <strong _ngcontent-ehb-c26="">java</strong> binary.</p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">CMD ["-jar", "/opt/app.jar"]</strong> And pass a few arguments to the above command.</p>
<p _ngcontent-ehb-c26=""><strong _ngcontent-ehb-c26="">EXPOSE 8080</strong> And, expose the application port from container to the outside world.</p>
<p _ngcontent-ehb-c26="">That's a lot to take in? Just build the image and you'll see it in action!</p>
<p _ngcontent-ehb-c26=""><img src="/assets/images/docker-build-screenshot.png" alt="alt" _ngcontent-ehb-c26=""></p>
<p _ngcontent-ehb-c26="">Take a moment to see what's happening with the build, see how all the layers are coming together to create the Docker image. The last line tells you that the image is built successfully, with id <code _ngcontent-ehb-c26="">8f148</code>... You can verify it by running <code _ngcontent-ehb-c26="">docker images</code> command.</p>
<p _ngcontent-ehb-c26=""><img src="/assets/images/docker-images-screenshot.png" alt="alt" _ngcontent-ehb-c26=""></p>
<p _ngcontent-ehb-c26="">No alt text provided for this image
The image <code _ngcontent-ehb-c26="">16f</code>..., as you can see above, is for Maven, with all the dependencies downloaded and is substantially a bigger image at 600+MB. While the image <code _ngcontent-ehb-c26="">8f1</code>..., with JDK and the JAR built previously with the Maven stage is less than 250MB in size.</p>
<p _ngcontent-ehb-c26="">You can run the image and create a container now with <code _ngcontent-ehb-c26="">docker run -dp 8080:8080 8f14.</code> With <em _ngcontent-ehb-c26="">-d</em> option you can run the container detached (background) from the terminal and with option <em _ngcontent-ehb-c26="">-p</em>, you're exposing the application port 8080 to the host port 8080. <code _ngcontent-ehb-c26="">8f14</code> is a shorthand image ID. You need to specify enough characters from the image id to uniquely identify the image.</p>
<p _ngcontent-ehb-c26=""><img src="/assets/images/sb-app-terminal-screenshot.png" alt="alt" _ngcontent-ehb-c26=""></p>
<p _ngcontent-ehb-c26="">Your Spring Boot application is now up and running as a docker container! Give it a try...</p>
<p _ngcontent-ehb-c26=""><img src="/assets/images/sb-app-browser-screenshot.png" alt="alt" _ngcontent-ehb-c26=""></p>
<p _ngcontent-ehb-c26="">No alt text provided for this image
In the next article, I'll help you setup auto builds to create images on Docker Hub infrastructure. Keep safe!</p>
<!--scullyContent-end--><scully-content _ngcontent-ehb-c26=""></scully-content>
<script>try {window['scullyContent'] = {cssId:"_ngcontent-ehb-c26",html:document.body.innerHTML.split('<!--scullyContent-begin-->')[1].split('<!--scullyContent-end-->')[0]};} catch(e) {console.error('scully could not parse content');}</script></div></app-blog><!----></div></div></app-root>
<script id="ScullyIO-transfer-state"></script><script src="runtime.d7b30ebf6f63920b.js" type="module"></script><script src="polyfills.e0cd7ea377ac4fab.js" type="module"></script><script src="main.94bfebe7fac5eb87.js" type="module"></script>

</body></html>